<template name="App_categories">

  <div class="content mt-3">
    <div class="animated fadeIn">
      <div class="row">

        <!-- new categories column -->
        <div class="col-lg-6">
          <div class="card">
            <div class="card-header">
              New Category
            </div>
            <div class="card-body card-block">
              <form action="" id="newCategoryForm" method="post" class="form-horizontal">
                <div class="row">
                  <div class="col col-md-12 ">
                    <!-- name input -->
                    <div class="row form-group">
                      <div class="col col-md-12">
                        <label for="name" class=" form-control-label">Name</label>
                        <input type="text" id="name" placeholder="" class="form-control" required="required">
                      </div>
                    </div>
                    <!-- slug input -->
                    <div class="row form-group">
                      <div class="col col-md-12">
                        <label for="slug" class=" form-control-label">Slug</label>
                        <input type="text" id="slug" disabled="disabled" placeholder="" class="form-control" required="required">
                      </div>
                    </div>
                    <!-- parent select -->
                    <div class="row form-group">
                      <div class="col-lg-12 col-md-12">
                        <label for="parent" class=" form-control-label">Parent Category</label>
                        <select name="parent" id="parent" class="form-control form-control-lg">
                          <option value="" selected="selected">None</option>

                          {{> selectCategories categoriesList}}

                        </select>
                      </div>
                    </div>

                  </div> <!-- col -->
                </div> <!-- row -->

                <div class="row">
                  <div class="col-md-12">
                    <button type="submit" class="at-btn flex-c-m size2 bg1 bo-rad-23 hov1 m-text3 trans-0-4 submit ">
                      Add New
                    </button>
                  </div>
                </div>

              </form>
            </div>
          </div>
        </div>

        <!-- categories view column -->
        <div class="col-md-6">
          <div class="card">
            <div class="card-header">
              Categories
            </div>
            <div class="card-body card-block">
              <!-- categories table -->
              <table class="table table-striped">
                <thead>
                  <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Slug</th>
                    <th scope="col">Parent</th>
                    <th scope="col">Action</th>
                  </tr>
                </thead>
                <tbody>

                  {{> tableCategories categoriesList}}

                </tbody>
              </table>

            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- .animated -->
  </div>
  <!-- .content -->

  <script src="/assets/js/vendor/jquery-2.1.4.min.js"></script>
  <script src="/assets/js/popper.min.js"></script>
  <script src="/assets/js/plugins.js"></script>
  <script src="/assets/js/main.js"></script>
</template>

<!-- generate subcategory option tag -->
<template name="selectCategories">
  {{#each this}}
    <option value="{{this.slug}}">
      {{#each this.tree}}----{{/each}}{{this.name}}
    </option>
    {{#if subcategory}}
      {{> selectCategories subcategory}}
    {{/if}}
  {{/each}}
</template>

<!--generate subcategory table row tag  -->
<template name="tableCategories">
  {{#each this}}
    <tr>
      <td>
        {{#each tree}}----{{/each}}{{this.name}}</td>
      <td>{{this.slug}}</td>
      <td>{{this.parent}}</td>
      <td>
        <button id="deleteButton" type="button" class="btn warning">delete</button>
      </td>
    </tr>
    {{#if subcategory}}
      {{> tableCategories subcategory}}
    {{/if}}
  {{/each}}
</template>
